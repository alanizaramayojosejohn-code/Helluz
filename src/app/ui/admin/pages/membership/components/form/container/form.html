<!-- components/form/container/component.html -->
<div class="p-6 max-w-2xl mx-auto">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">{{ getFormTitle() }}</h1>
    <button mat-icon-button (click)="onCancel()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  @if (isLoading()) {
    <div class="flex justify-center p-8">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
  }

  @if (errorMessage()) {
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      {{ errorMessage() }}
    </div>
  }

  <form [formGroup]="membershipForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <!-- Nombre -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Nombre de la Membresía</mat-label>
      <input matInput formControlName="name" placeholder="Ej: Mensual Premium" />
      @if (hasError('name')) {
        <mat-error>{{ getErrorMessage('name') }}</mat-error>
      }
    </mat-form-field>

    <!-- Duración en días -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Duración (días)</mat-label>
      <input matInput type="number" formControlName="durationDays" placeholder="30" />
      <mat-hint>Número de días de vigencia de la membresía</mat-hint>
      @if (hasError('durationDays')) {
        <mat-error>{{ getErrorMessage('durationDays') }}</mat-error>
      }
    </mat-form-field>

    <!-- Total de sesiones -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Total de Sesiones</mat-label>
      <input matInput type="number" formControlName="totalSessions" placeholder="12" />
      <mat-hint>Número de sesiones incluidas en la membresía</mat-hint>
      @if (hasError('totalSessions')) {
        <mat-error>{{ getErrorMessage('totalSessions') }}</mat-error>
      }
    </mat-form-field>

    <!-- Días permitidos -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Días Permitidos</mat-label>
      <mat-select formControlName="allowedDays" multiple>
        @for (day of daysOptions; track day.value) {
          <mat-option [value]="day.value">{{ day.label }}</mat-option>
        }
      </mat-select>
      <mat-hint>Selecciona los días en que se puede usar la membresía</mat-hint>
      @if (hasError('allowedDays')) {
        <mat-error>{{ getErrorMessage('allowedDays') }}</mat-error>
      }
    </mat-form-field>

    <!-- Costo -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Costo</mat-label>
      <input matInput type="number" formControlName="cost" placeholder="0.00" />
      <span matTextPrefix>$&nbsp;</span>
      @if (hasError('cost')) {
        <mat-error>{{ getErrorMessage('cost') }}</mat-error>
      }
    </mat-form-field>

    <!-- Estado -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Estado</mat-label>
      <mat-select formControlName="status">
        <mat-option value="activo">Activo</mat-option>
        <mat-option value="inactivo">Inactivo</mat-option>
      </mat-select>
      @if (hasError('status')) {
        <mat-error>{{ getErrorMessage('status') }}</mat-error>
      }
    </mat-form-field>

    <!-- Botones -->
    <div class="flex gap-4 justify-end pt-4">
      <button mat-stroked-button type="button" (click)="onCancel()" [disabled]="isSubmitting()">
        Cancelar
      </button>
      <button mat-raised-button color="primary" type="submit" [disabled]="isSubmitting()">
        @if (isSubmitting()) {
          <mat-spinner diameter="20" class="inline-block mr-2"></mat-spinner>
        }
        {{ isEditMode() ? 'Actualizar' : 'Crear' }}
      </button>
    </div>
  </form>
</div>
