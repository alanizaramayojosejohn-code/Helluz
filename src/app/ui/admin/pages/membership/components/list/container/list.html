<!-- components/list/container/component.html -->
<div class="p-6">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">Membresías</h1>
    <button mat-raised-button color="primary" (click)="onCreateMembership()">
      <mat-icon>add</mat-icon>
      Nueva Membresía
    </button>
  </div>

  @if (isLoading()) {
    <div class="flex justify-center p-8">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
  }

  @if (errorMessage()) {
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      {{ errorMessage() }}
    </div>
  }

  @if (memberships$ | async; as memberships) {
    <div class="mat-elevation-z2">
      <table mat-table [dataSource]="memberships" class="w-full">
        <!-- Nombre -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef class="font-semibold">Nombre</th>
          <td mat-cell *matCellDef="let membership">{{ membership.name }}</td>
        </ng-container>

        <!-- Duración -->
        <ng-container matColumnDef="duration">
          <th mat-header-cell *matHeaderCellDef class="font-semibold">Duración</th>
          <td mat-cell *matCellDef="let membership">{{ membership.durationDays }} días</td>
        </ng-container>

        <!-- Sesiones -->
        <ng-container matColumnDef="sessions">
          <th mat-header-cell *matHeaderCellDef class="font-semibold">Sesiones</th>
          <td mat-cell *matCellDef="let membership">{{ membership.totalSessions }} sesiones</td>
        </ng-container>

        <!-- Costo -->
        <ng-container matColumnDef="cost">
          <th mat-header-cell *matHeaderCellDef class="font-semibold">Costo</th>
          <td mat-cell *matCellDef="let membership">${{ membership.cost }}</td>
        </ng-container>

        <!-- Estado -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef class="font-semibold">Estado</th>
          <td mat-cell *matCellDef="let membership">
            <mat-chip
              [class]="membership.status === 'activo' ? 'bg-green-500 text-white' : 'bg-gray-400 text-white'"
              (click)="onToggleStatus(membership)"
              class="cursor-pointer"
            >
              {{ membership.status }}
            </mat-chip>
          </td>
        </ng-container>

        <!-- Acciones -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="font-semibold">Acciones</th>
          <td mat-cell *matCellDef="let membership">
            <button
              mat-icon-button
              (click)="onViewDetail(membership)"
              matTooltip="Ver detalle"
            >
              <mat-icon>visibility</mat-icon>
            </button>
            <button
              mat-icon-button
              (click)="onEditMembership(membership)"
              matTooltip="Editar"
            >
              <mat-icon>edit</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  }
</div>
